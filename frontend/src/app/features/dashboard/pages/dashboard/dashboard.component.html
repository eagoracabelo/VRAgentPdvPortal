<div class="advanced-dashboard">
    <!-- Header com controles -->
    <div class="dashboard-header">
        <div class="header-title">
            <h1>Salt Management Dashboard</h1>
            <p>Monitoramento completo da infraestrutura SaltStack</p>
        </div>

        <div class="header-controls">
            <select class="minion-selector" [(ngModel)]="selectedMinion" (change)="onMinionSelect(selectedMinion)">
                <option value="*">Todos os Minions</option>
                <!-- Opções dinâmicas serão adicionadas via código -->
            </select>

            <button class="btn btn-primary" (click)="refreshAllData()" [disabled]="loading">
                <i class="fas fa-sync-alt" [class.fa-spin]="loading"></i>
                Atualizar
            </button>

            <button class="btn btn-secondary" (click)="pingAllMinions()">
                <i class="fas fa-wifi"></i>
                Ping Geral
            </button>
        </div>
    </div>

    <!-- Alert de erro -->
    <div class="alert alert-danger" *ngIf="error">
        <i class="fas fa-exclamation-triangle"></i>
        {{ error }}
        <button class="btn-close" (click)="clearError()">×</button>
    </div>

    <!-- Conteúdo principal -->
    <div class="dashboard-content" *ngIf="adminOverview$ | async as overview">

        <!-- Status dos Minions -->
        <app-minion-status-grid [minionsStatus]="overview.minionsStatus">
        </app-minion-status-grid>

        <!-- Métricas de Performance -->
        <app-performance-metrics [cpuData]="overview.systemSummary.cpu" [memoryData]="overview.systemSummary.memory"
            [diskData]="overview.systemSummary.disk">
        </app-performance-metrics>

        <!-- Jobs Recentes -->
        <app-recent-jobs [jobs]="overview.recentJobs" [maxItems]="10">
        </app-recent-jobs>

    </div>

    <!-- Loading State -->
    <div class="loading-overlay" *ngIf="loading">
        <div class="loading-content">
            <div class="spinner"></div>
            <p>Carregando dados do SaltStack...</p>
        </div>
    </div>
</div>